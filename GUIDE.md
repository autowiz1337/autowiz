
# Velocity AI - Administrator Guide

## Overview
Velocity AI is a comprehensive automotive listing optimization platform designed to automate and enhance vehicle merchandising. This guide documents the core functions and user flows available in the current build.

---

## 1. Landing Page Modules
The landing page serves as the primary conversion funnel. It includes several high-performance modules:

*   **Hero Section**: Features a dynamic background and primary CTA ("Get Started"). Includes a mock dashboard visual to establish credibility.
*   **Stats & Trust**: Displays key performance metrics and trusted partner logos to build authority.
*   **Comparison Sliders**: Interactive before/after comparisons for both photo enhancement and copywriting.
*   **Feature Showcases**:
    *   **Avatar Insights**: Explains how the AI builds buyer personas.
    *   **Voiceover Showcase**: Demonstrates neural audio generation.
    *   **Video Showcase**: Shows automated video production capabilities.
*   **Comparison Table**: A "us vs them" breakdown highlighting cost and time savings.
*   **Guarantee Section**: Risk-reversal copy to encourage sign-ups.

---

## 2. Dashboard Interface
Accessed via the "Log in" button or automatically via a magic link (e.g., `/dashboard?id=record_1765533411401.json`).

### Navigation
The sidebar provides access to four main views:
1.  **Overview**: A summary of all assets and strategy.
2.  **AI Strategy**: Deep dive into the "Target Persona" and "Emotional Hook" generated by the AI.
3.  **Media Assets**: Management of photos and video content.
4.  **Narrative & Copy**: The text editor for the vehicle description.

### Key Functions
*   **Listing Health**: A gamified widget showing a score (0-100) based on asset quality.
*   **Visual IQ**: Analysis of photo quality (lighting, composition).
*   **Optimization**:
    *   **Narrative Editor**: A distraction-free text area to edit the AI-generated description. Includes a "Click to Edit" hint and easy-copy functionality.
    *   **Save Draft**: Persists changes to LocalStorage.
    *   **Distribution**: One-click links to post the listing to major portals (Autovit, OLX, etc.).
*   **Resilience & Performance**:
    *   **Error Boundary**: Displays a branded "Access Error" screen with "Retry Connection" options if the R2 data fetch fails or the ID is invalid.
    *   **Lazy Loading**: Gallery thumbnails use `loading="lazy"` to improve initial load performance (LCP).

---

## 3. Checkout Flows
The application supports three distinct checkout experiences based on user segment.

### A. Free Pilot (`Checkout.tsx`)
*   **Route**: `/pilot` (or legacy `?page=checkout`)
*   **Purpose**: Low-friction entry for free trials.
*   **Features**:
    *   Simple form (Name, Email, URL).
    *   No payment required.
    *   Urgency timers (5-minute reservation).

### B. Paid Stripe Flow (`PaidCheckout.tsx`)
*   **Route**: `/checkout` (Default "Get Started")
*   **Purpose**: Main revenue driver.
*   **Features**:
    *   **Step 1**: Lead capture (Name, Email, URL). Includes real-time URL validation for `autovit.ro`.
    *   **Step 2**: Payment collection via Stripe Elements.
    *   **Team Simulator**: A "live chat" widget showing the assignment of a Copywriter, Visual Specialist, and Video Director to the project.
    *   **Offer Stack**: Visual breakdown of value ($7,300 value for $499).

### C. Invite-Only Flow (`InviteCheckout.tsx`)
*   **Route**: `/invite`
*   **Purpose**: VIP/Beta access for pre-selected users.
*   **Features**:
    *   **Streamlined**: Single-step process (no payment).
    *   **Exclusive Branding**: "Invite-Only Access" header.
    *   **Success State**: Displays a "Assets Generating" confirmation screen instead of a payment form.
    *   **Validation**: Checks for valid Autovit URLs before submission.

---

## 4. Technical Architecture
### Dynamic Metadata
The application now manages browser tab titles dynamically based on the active route to improve SEO and user context:
*   **Landing**: "Velocity AI | Automate Your Dealership"
*   **Dashboard**: "Report: [Title] | Velocity AI"
*   **Checkout**: "Secure Checkout | Velocity AI"
*   **Invite**: "VIP Access | Velocity AI"

### Data Hydration
The dashboard operates as a "stateless" viewer, hydrating entirely from external JSON sources (Cloudflare R2).

1.  **URL Resolution**:
    *   The app checks for an `id` query parameter (e.g., `/dashboard?id=record_1765533411401.json`).
    *   If the ID starts with `http`, it is treated as a full absolute URL.
    *   Otherwise, it is appended to the `R2_BASE_URL` constant configured in the code (`https://pub-ce9ab66f3fc6436f92644d16b5892006.r2.dev`).

2.  **Fetching Strategy**:
    *   On component mount, a `useEffect` hook triggers a `fetch()` request.
    *   **Loading State**: Displays a branded loading spinner while awaiting the response.
    *   **Error Handling**: Catches 404s, network errors, or malformed JSON and displays a user-friendly "Access Error" screen with a retry button.

3.  **Data Transformation (Mapper)**:
    *   Raw JSON from the backend (often in PascalCase or CSV formats) is passed through `src/utils/reportMapper.ts`.
    *   **CSV Parsing**: Fields like `Images` and `topSellingPoints` are split by commas into arrays.
    *   **Video Selection**: The logic specifically selects the *second* video URL (index 1) from the CSV list, falling back to the first if only one exists.
    *   **Date Formatting**: ISO dates are converted to readable `en-US` locale strings.

4.  **Mock Fallback**:
    *   If no `id` is provided, the system simulates a 1-second network delay and loads a hardcoded "Mercedes-AMG" demo report to ensure the dashboard is always explorable for new visitors.

5.  **Security Model**:
    *   URLs are treated as **Capability URLs** (possession of the link grants read access).
    *   No authentication token is required for the read-only view, facilitating easy sharing with clients.

---

## 5. Configuration
To test the Invite flow, navigate to `/invite` in your browser.
Legacy links (e.g., `?page=invite`) are automatically redirected to the new routes via the `LegacyRedirectHandler` in `App.tsx`.
